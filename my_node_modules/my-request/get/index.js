const http = require("http");
const qs = require('querystring');

let MyGet = (config, path, data, callback) => {
    let body = '';
    let content = qs.stringify(data);

    let opt = {
        hostname: config.hostname,
        port: config.port,
        path: path + '?' + content,
        method: 'GET',
        headers:{
            "Content-Type": 'application/json'
        }
    };

    let req = http.request(opt, function(res) {
        res.setEncoding('utf8');
        res.on('data',function(data){
            body += data;
        }).on('end', function(){
            callback(body);
        });
    }).on('error', function(e) {
        console.log("error: " + e.message);
    });

    req.end();
};

module.exports = MyGet;